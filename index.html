<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
<title>Ringe & Linien ‚Äì Vollbild</title>
<style>
  :root{
    --bg:#0b0f15; --bg2:#06080d; --fg:#e9eef6; --accent:#a9b8ff;
    --glass: rgba(10,13,20,.5); --line: rgba(255,255,255,.08);
  }
  html, body { height:100%; margin:0; background:var(--bg); color:var(--fg); font-family:system-ui, -apple-system, Segoe UI, Roboto, sans-serif;}
  #wrap { position:relative; width:100%; height:100%; overflow:hidden; }

  canvas { position:absolute; inset:0; width:100%; height:100%; touch-action:none; }
  #c { z-index: 1; }
  #paintCanvas { z-index: 2; pointer-events:none; }

  .hud {
    position:absolute; left:12px; top:12px; display:flex; gap:8px; flex-wrap:wrap; align-items:center;
    background:var(--glass); border:1px solid var(--line); border-radius:10px; padding:8px 10px; backdrop-filter: blur(8px);
    font-size:13px; z-index:3;
  }
  .hud .stat { padding:4px 8px; border-radius:8px; background:rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.08); }
  .hud button {
    appearance:none; border:1px solid rgba(255,255,255,.2); background:#121823; color:var(--fg); padding:6px 10px; border-radius:8px; cursor:pointer; font-size:13px;
  }
  .hud button:hover { filter:brightness(1.1); }

  .msg {
    position:absolute; left:50%; top:50%; transform:translate(-50%,-50%);
    background:rgba(10,13,20,.65); border:1px solid var(--line); padding:14px 18px; border-radius:12px;
    font-weight:600; letter-spacing:.3px; display:none; z-index:3;
  }
  .kbd{ font-family:ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; background:#131a27; padding:2px 6px; border-radius:6px; border:1px solid rgba(255,255,255,.12); font-size:12px }

  #startScreen{
    position:fixed; inset:0; background:linear-gradient(160deg, #0b0f15 0%, #06080d 100%);
    display:flex; align-items:center; justify-content:center; padding:16px;
    z-index:10;
  }
  .panel{
    width:min(560px, 96vw); max-height:92vh; overflow:auto;
    background:var(--glass); border:1px solid var(--line); border-radius:16px; padding:16px 18px; backdrop-filter: blur(10px);
    box-shadow: 0 20px 40px rgba(0,0,0,.45);
  }
  .panel h1{ margin:.2rem 0 .6rem; font-size:20px; letter-spacing:.4px; }
  .rows{ display:flex; flex-direction:column; gap:10px; }
  .row{ display:flex; flex-direction:column; gap:6px; }
  .row label{ font-size:13px; opacity:.95 }
  .row input[type="range"], .row select{ width:100%; }
  .row input, .row select{
    background:#121823; color:var(--fg); border:1px solid rgba(255,255,255,.18); border-radius:8px; padding:8px 10px; font-size:14px;
  }
  .hint{ font-size:12px; opacity:.85; margin-top:8px }
  .actions{ display:flex; gap:10px; justify-content:flex-end; margin-top:12px; }
  .actions button{
    background:#1f3a8a; border:1px solid #2a4cc1; color:var(--fg); padding:10px 14px; border-radius:10px; cursor:pointer; font-weight:600;
  }
  .actions button:hover{ filter:brightness(1.05); }

  .hidden{ display:none !important; }
</style>
</head>
<body>
<!-- mm-Kalibrierung (f√ºr Linien-√ñffnung) -->
<div id="mmCal" style="position:absolute; visibility:hidden; width:10mm; height:1px;"></div>

<div id="wrap">
  <canvas id="paintCanvas"></canvas>
  <canvas id="c"></canvas>

  <div class="hud hidden" id="hud">
    <span class="stat">Layers: <b id="layersLeft">10</b></span>
    <span class="stat">Bounces: <b id="bounces">0</b></span>
    <button id="backMenu">Zur√ºck ins Men√º</button>
    <button id="reset">Neu starten</button>
  </div>

  <div id="msg" class="msg">Alle Layers entfernt! Tippe/Klick in die Mitte und schie√üe erneut.</div>
</div>

<div id="startScreen">
  <div class="panel">
    <h1>‚öôÔ∏è Optionen</h1>
    <div class="rows">
      <div class="row">
        <label for="shape">Form</label>
        <select id="shape">
          <option value="circle">Kreis</option>
          <option value="lines">Linien (von oben nach unten)</option>
          <option value="pendulum">Pendel (Zeichnen)</option>
        </select>
      </div>

      <div class="row">
        <label for="numRings">Anzahl Schichten: <span id="numRingsVal" class="kbd">10</span></label>
        <input id="numRings" type="range" min="3" max="30" value="10"/>
      </div>

      <div class="row">
        <label id="openWidthLbl" for="openWidth">√ñffnung (¬∞): <span id="openWidthVal" class="kbd">40¬∞</span></label>
        <input id="openWidth" type="range" min="10" max="160" value="40"/>
      </div>

      <div class="row">
        <label for="shotSpeed">Max. Schusskraft: <span id="shotSpeedVal" class="kbd">1100</span></label>
        <input id="shotSpeed" type="range" min="300" max="1800" value="1100"/>
      </div>

      <div class="row">
        <label for="gravity">Gravitation: <span id="gravityVal" class="kbd">1300</span></label>
        <input id="gravity" type="range" min="10" max="2200" value="1300"/>
      </div>

      <div class="row">
        <label for="trailLen">Spurl√§nge (Normalmodus): <span id="trailLenVal" class="kbd">70</span></label>
        <input id="trailLen" type="range" min="10" max="1000" value="70"/>
      </div>

      <div class="row">
        <label><input id="multi" type="checkbox"/> Multiball</label>
      </div>

      <!-- ZEICHENMODUS ‚Äì Farben/Palette -->
      <div class="row">
        <label><input id="drawMode" type="checkbox"/> Zeichenmodus (permanenter Schweif)</label>
      </div>
      <div class="row">
        <label for="pendulumLen">Pendel-L√§nge: <span id="pendulumLenVal" class="kbd">120</span></label>
        <input id="pendulumLen" type="range" min="40" max="300" value="120"/>
      </div>
      <div class="row">
        <label for="drawColorMode">Schweif-Farbe</label>
        <select id="drawColorMode">
          <option value="rainbow">üåà Regenbogen</option>
          <option value="red">üî¥ Rot</option>
          <option value="blue">üîµ Blau</option>
          <option value="green">üü¢ Gr√ºn</option>
          <option value="magenta">üü£ Magenta</option>
          <option value="cyan">üî∑ Cyan</option>
          <option value="yellow">üü° Gelb</option>
          <option value="white">‚ö™ Wei√ü</option>
          <option value="neon">‚ú® Neon-Palette (cycle)</option>
        </select>
      </div>

      <!-- AUDIO -->
      <div class="row">
        <label for="pitchShift">Tonleiter ‚Äì Pitch (¬±5 HT): <span id="pitchShiftVal" class="kbd">0</span></label>
        <input id="pitchShift" type="range" min="-5" max="5" step="1" value="0"/>
      </div>

      <div class="row">
        <label for="toneDur">Ton-Dauer (bis 5 s): <span id="toneDurVal" class="kbd">0.22 s</span></label>
        <input id="toneDur" type="range" min="0.22" max="5" step="0.01" value="0.22"/>
      </div>

      <div class="row">
        <label for="toneOrder">Reihenfolge Tonfolge</label>
        <select id="toneOrder">
          <option value="updown">aufsteigend‚Äìabsteigend</option>
          <option value="downup">absteigend‚Äìaufsteigend</option>
          <option value="random">zuf√§llig</option>
          <!-- >>> NEU: bekannte Melodien -->
          <option value="melody_entchen">bekannt: Alle meine Entchen</option>
          <option value="melody_bond">bekannt: James Bond</option>
          <!-- <<< NEU -->
        </select>
      </div>

      <div class="row">
        <label for="toneType">Ton-Art</label>
        <select id="toneType">
          <option value="sine">Sine</option>
          <option value="square">Square</option>
          <option value="sawtooth">Saw</option>
          <option value="triangle">Triangle</option>
          <option value="horn">Hupe</option>
          <option value="fart">Pupsen</option>
          <option value="pluck">Pluck</option>
          <option value="noise">Noise</option>
        </select>
      </div>

      <div class="row">
        <label><input id="autoRestart" type="checkbox"/> Auto-Neustart nach letzter Schicht</label>
      </div>
    </div>

    <div class="hint">
      <span class="kbd">Ziehen &amp; Loslassen</span> zum Schie√üen (bei Linien: Start oben) ‚Ä¢
      <span class="kbd">Tap/Klick</span> nahe Zentrum/Start: Ball-Reset
    </div>

    <div class="actions">
      <button id="startBtn" class="primary">START (Vollbild)</button>
    </div>
  </div>
</div>

<script type="module" src="main.js"></script>
</body>
</html>
